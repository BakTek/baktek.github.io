
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <title>Double-Hop</title>
    <meta name="Keywords" content="Double-Hop, authentification, IIS, ASP.NET, web.config, SharePoint, back-end, front-end, délégation, Kerberos" />
    <meta name="Description" content="Description du problème de double-hop avec une application Web IIS et un back-end. Revue des solutions techniques." />

    <link href="Styles/masterroot322b.css" type="text/css" rel="stylesheet" />
    <link href="Styles/tables7339.css" type="text/css" rel="stylesheet" />
    <link href="Styles/spxpubc27acd.css" type="text/css" rel="stylesheet" />
    <link href="Styles/accessibility2703.css" type="text/css" rel="stylesheet" />
    <link href="Styles/theme.css" type="text/css" rel="stylesheet" />
    <link href="Styles/customf519.css" type="text/css" rel="stylesheet" />

</head>
<body class="ltr">

    <table cellspacing="0" class="MS_MasterFrame" cellpadding="0" border="0">
        <tr>
            <td id="IWS_WH_Elem_GlobalLinks" class="MS_MasterGlobalLinks">
                <div />
            </td>
        </tr>
        <tr>
            <td id="IWS_WH_Elem_Header" class="MS_MasterHeader">
                <TABLE cellSpacing="0" cellPadding="0" width="780" border="0" class="MSC_SiteWidth" style="clear:left"><TR><TD class="BG_Dark"><img alt="" src="Styles/Header-short.jpg" /></TD><TD width="400" nowrap="true" class="BG_Dark" style="padding-left:20px;padding-right:20px; padding-bottom: 10px"><table cellpadding="0" cellspacing="0" width="100%" style="padding-left:10px"><tr><td><h2 id="IWS_WH_Elem_SiteTitle" class="MSC_HeaderText F_VeryLight"><span style="font-weight: normal; font-size: 18pt; color: #ffffff; font-style: normal; font-family: Arial; text-decoration: ">BakTek</span></h2></td></tr><tr><td><h5 id="IWS_WH_Elem_SiteDescription" class="MSC_HeaderDescription F_Light"><span style="font-weight: normal; font-size: 14pt; color: #ffffff; font-style: normal; font-family: Arial; text-decoration: ">Spécialiste du développement SharePoint</span></h5></td></tr></table></TD><TD class="BG_Dark" width="100%" align="right"><img alt="" src="Styles/Header-long.jpg" /></TD></TR></TABLE><TABLE cellSpacing="0" cellPadding="0" width="100%" border="0" class="BG_Base MSC_SiteWidth"><tr><td colspan="2" height="2" bgcolor="#ffffff" /></tr><tr><td colspan="2" height="2" bgcolor="#ffffff" /></tr></TABLE>
            </td>
        </tr>
        <tr style="">
            <td id="IWS_WH_Elem_TopNav" class="MS_MasterPrimaryNav">
                <table cellpadding="0" cellspacing="0" class="MSC_PrimaryNavFrame"><tr><td class="MSC_PrimaryNavLinkFrame" posId="1"><a class="MSC_PrimaryNavLink" type="1" href="index.html">Accueil</a></td><td name="IWS_Decodeable" class="MSC_PrimaryNavLeftSpace"> </td><td name="IWS_Decodeable" class="MSC_PrimaryNavRightSpace"> </td><td class="MSC_PrimaryNavLinkFrame" posId="2"><a class="MSC_PrimaryNavLink" type="1" href="experience.html">Mon Expertise</a></td><td name="IWS_Decodeable" class="MSC_PrimaryNavLeftSpace"> </td><td name="IWS_Decodeable" class="MSC_PrimaryNavRightSpace"> </td><td class="MSC_PrimaryNavLinkFrame" posId="3"><a class="MSC_PrimaryNavLink" type="1" href="offre.html">Mon Offre</a></td><td name="IWS_Decodeable" class="MSC_PrimaryNavLeftSpace"> </td><td name="IWS_Decodeable" class="MSC_PrimaryNavRightSpace"> </td><td class="MSC_PrimaryNavLinkFrame" posId="4"><a class="MSC_PrimaryNavLink" type="1" href="baktek.html">Informations et Contact</a></td><td name="IWS_Decodeable" class="MSC_PrimaryNavLeftSpace"> </td><td name="IWS_Decodeable" class="MSC_PrimaryNavRightSpace"> </td><td class="MSC_PrimaryNavLinkFrame" posId="5"><a class="MSC_PrimaryNavLink" type="1" href="partenaires.html">Partenaires</a></td><td name="IWS_Decodeable" class="MSC_PrimaryNavLeftSpace"> </td><td name="IWS_Decodeable" class="MSC_PrimaryNavRightSpace"> </td><td class="MSC_PrimaryNavLinkFrame" posId="6"><a class="MSC_PrimaryNavLink" type="1" href="clients.html">Clients</a></td><td name="IWS_Decodeable" class="MSC_PrimaryNavLeftSpace"> </td><td name="IWS_Decodeable" class="MSC_PrimaryNavRightSpace"> </td><td class="MSC_PrimaryNavLinkFrame" posId="7"><a class="MSC_PrimaryNavLink" type="1" href="articles.html">SharePoint...</a></td><td name="IWS_Decodeable" class="MSC_PrimaryNavLeftSpace"> </td><td name="IWS_Decodeable" class="MSC_PrimaryNavRightSpace"> </td><td name="IWS_Decodeable" class="MSC_TopNavEnd"> </td></tr></table>
            </td>
        </tr>
        <tr>
            <td>
                <table cellspacing="0" cellpadding="0" border="0" style="width:100%">
                    <tr>
                        <td id="IWS_WH_Elem_LeftNav" class="MS_MasterLeftNav" style="width:0px;white-space: nowrap"></td>
                        <td class="MS_MasterBody">
                            <a name="mainContent"></a>
                            <div id="IWS_WH_Elem_Content" class="MSC_Body">
                                <div id="IWS_WH_ZoneRowContainer">
                                    <table class="MS_WH_ZoneRow">
                                        <tbody>
                                            <tr>
                                                <td style="WIDTH: 1%" colspan="1" rowspan="1" class="MS_WH_ZoneSpacing" />
                                                <td valign="top" style="WIDTH: 98%" colspan="1" rowspan="1">
                                                    <div class="MS_WH_ZoneContent">
                                                        <div id="General_Content"><font face="Georgia" size="4" color="#000033"><strong>Problème du double-hop et solutions <hr /></strong></font></div><div> </div><div><font face="Georgia" size="3" color="#000033"><strong>Le problème</strong></font></div><div> </div><div><font color="#000033">Un double saut (ou « double-hop ») survient lorsqu’une application serveur (typiquement une application Web ASP.NET) tente de s’authentifier avec les accréditations de l’utilisateur client sur un système « back-end » :</font></div><div> </div><div>
                                                                <img src="Images/Articles/double_hop_probleme.jpg" alt="Problème du double-hop" />
                                                        </div><div> </div><font color="#000033">
                                                            <p>Le problème que l’on rencontre couramment est un souci d’authentification entre les deux serveurs. En effet, les accréditations de l’utilisateur ne peuvent pas être transmises entre le premier serveur et le second. Si le premier serveur tente de s’authentifier avec l’identité de l’utilisateur, le second serveur ne pourra pas reconnaître cette authentification, et il y aura une erreur d’authentification (erreur HTTP 401 par exemple).</p><p> </p><p>Pour comprendre la cause de ce problème, rappelons rapidement quelques principes :</p><ul><li>Un processus possède une identité propre, qui peut-être un compte machine par défaut (comme Local System), un compte utilisateur local, ou un compte utilisateur de l’AD. Le code du processus est exécuté sous cette identité. </li><li>Un thread possède par défaut la même identité que son processus parent. On peut cependant modifier cette identité dans un thread donné : on parle alors d’impersonation. Plusieurs threads dans un même processus peuvent donc tourner sous différentes identités. Il est également possible pour un thread impersonifié de revenir à l’identité par défaut du processus : c’est l’opération de <i>revert-to-self</i>. </li><li>Dans une application ASP.NET, l’identité du processus est définie par l’identité du pool d’application. Les threads qui vont exécuter les requêtes clientes sont impersonifiés ou pas en fonction de l’attribut <i>impersonate</i> de la balise <i>identity</i> du web.config. L’identité emprunté par le thread peut prendre 2 valeurs : <ul><li>Si l’application Web est configurée en anonyme, c’est l’identité spécifiée dans IIS pour le compte anonyme qui sera utilisée par le thread. </li><li>Si une authentification (Basique, Windows Intégrée, etc...) est configurée dans IIS, c’est l’identité de l’utilisateur qui sera utilisée par le thread. </li></ul></li></ul><p> </p><p>Le problème de double-hop peut se poser dans ce dernier cas : lorsque l’application ASP.NET récupère l’identité de l’utilisateur, tout le code de l’application s’exécute sous cette identité. Une connexion à une base de données ou un service Web se fera donc (à défaut d’accréditations explicites) sous cette identité. </p><p>Le serveur back-end refusera alors la connexion puisqu’il est impossible au serveur frontal de prouver l’identité de l’utilisateur qu’il impersonifie (le système d’authentification NTLM ne permet qu’aux possesseurs du mot de passe de s’authentifier ; hors le serveur ASP.NET ne connaît pas ce mot de passe). </p><p> </p><p>Il existe plusieurs options pour éviter ce comportement :</p><ol><li>Utilisation de l’<b>authentification basique + SLL</b> (pour éviter que le mot de passe ne transite en clair) : le serveur Web aura alors connaissance du mot de passe de l’utilisateur et pourra le réutiliser pour s‘authentifier sur le serveur back-end </li><li>Utilisation de l’<b>authentification Kerberos + délégation</b> : un jeton d’authentification pourra alors passer entre les serveurs. C’est la méthode à préférer dans des environnements Intranet + AD. </li><li>Faire un <b><i>revert-to-self</i></b> (par code) pour forcer le thread à utiliser l’identité du process : toutes les connexions au back-end se feront alors sous cette même identité. </li><li>Utiliser une <b>authentification FBA</b> (<i>Form Based Authentication</i>) : on récupère les accréditations de l’utilisateur depuis uin formulaire, on vérifié son identité par code, et on réalise soi-même l’impersonation. Le serveur connaît alors les accréditations de l’utilisateur et peut les utiliser pour s’authentifier au près du back-end. </li><li>Autres solutions : <b>COM+</b>, <b>accréditations dans le web.config + encryption</b>, etc </li></ol><p> </p><p>Passons en revue quelques-unes de ces solutions :</p><p> </p><p><font face="Georgia" size="3" color="#000033"><strong>Authentification Kerberos avec délégation</strong></font></p><p> </p><p>Il s'agit d'une solution à mettre en place dans des environnement Intranet avec Active Directory. Tous les participants (les serveurs front- et back-end, ainsi que les postes clients) doivent pouvoir contacter le DC du domaine.</p><p> </p><p>Il s'agit de réaliser les 4 étapes suivantes :</p><p> </p><ol>
                                                                <li>Activation de l'authentification Kerberos au niveau de IIS et des systèmes back-end. Pour IIS, on utilisara la commande :<br /><br /><u>- Pour IIS 6 :</u><br /><em>cscript adsutil.vbs set w3svc/0/ROOT/NTAuthenticationProviders "Negotiate,NTLM"<br /></em><br /><u>- Pour IIS 7 :</u><br /><em>appcmd.exe set config "Web app Name" -section:system.webServer/security/authentication/windowsAuthentication /+"providers.[value='Negotiate']" /commit:apphost<br /></em><br /></li>
                                                                <li>
                                                                    Autorisation de l'authentification Kerberos au niveau des postes clients : dans Internet Explorer, l'option "Activer l'authentification intégrée de Windows" doit être activée, ce qui est normalement le cas par défaut.<br /><br />
                                                                        <img src="Images/Articles/double_hop_Windows_Integrated_IE.jpg" alt="Paramètre d'authentification intégrée dans IE" />
                                                                </li>
                                                                <li>Enregistrement de SPN pour chacun des serveurs. Des SPN "par défaut" sont enregistrés pour la machine par SQL Server par exemple. Pour le service HTTP de IIS, et dans le cas où l'on utilise un compte du domaine pour l'identié de l'application pool, il faut enregistrer un nouveau SPN avec :<br /><br /><em>setspn -A HTTP/nom_de_la_machine domaine\utilisateur</em><br /><br /></li>
                                                                <li>Autorisation de la délégation pour la machine front-end. Cela se réalise au niveau de la console des utilisateurs et des ordinateurs de l'AD</li>
                                                            </ol><p> </p><p>A noter que les étapes 1 à 3 ci-dessus correspondent à la mise en place de l'authentification Kerberos entre les différents acteurs du système. La délégation proprement dite n'intervient qu'à l'étape 4. </p><p> </p><p>La fonction des SPN est d'identifier le mot de passe à utiliser pour crypter des jetons. Le mot de passe doit en effet être connu du compte exécutant le service (par exemple l'application pool) et du DC. Grâce au SPN le "serveur de jetons" (situé sur le DC) détermine quel compte va devoir décrypter le jeton. Pour une association {service + machine hôte} donnée, il cherche donc dans la base des SPN le compte correspondant. Pour les comptes machine, un SPN est automatiquement enregistré, ce qui dispense généralement de l'utilisation de setSPN pour des services s'exécutant sous un compte local. Si plusieurs SPN ont été positionnés pour un même couple {service + machine hôte}, l'authentification Kerberos ne pourra fonctionner puisque le "serveur de jetons" ne pourra déterminer le bon compte (et donc le bon mot de passe) à utiliser pour le cryptage du jeton.</p><p> </p><p><strong><font face="Georgia" size="3" color="#000033">Solution du revert-to-self</font></strong></p>
                                                        </font><p> </p><p><font color="#000033">La méthode du revert-to-self est applicable dans une application ASP.NET en mode impersonate=true. Le principe est de repasser le contexte d'exécution du code sous l'identié du process. Il n'y a alors plus de problème d'authentification vers le système back-end puisque le processus est capable de répondre au challenge d'identification avec son propre mot de passe. Le scénario est alors le suivant :<br /></font></p><font color="#000033"><ol><li>L'utilisateur se connecte à l'application Web. Il s'authentifie en Windows auprès de IIS qui passe le jeton à ASP.NET. ASP.NET lance exécute alors le thread pour le traitement de la requête sous l'identité de l'utilisateur. C'est là que le problème de double-hop peut survenir en cas de connexion à un système back-end : ASP.NET ne peut pas réutiliser l'identité de l'utilisateur initial. </li><li>On fait donc un « revert-to-self » : le thread continue son excécution sous l'identité du process (ie de l'application pool) </li><li>On exécute la requête vers le back-end </li><li>On revient à l'identité initiale du thread (ie celle de l'utilisateur) pour la suite de l'exécution de la requête </li></ol></font><p> </p><p><font color="#000033">Pour réaliser le revert-to-self, on utilise un appel à la méthode suivante :</font></p><p> </p><blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><p><font color="#000033"><em>using System.Security.Principal; </em></font></p><p><font color="#000033"><em>. . .</em></font></p><p><font color="#000033"><em>WindowsIdentity wi = null; // pour stocker l'identité afin d'y revenir plus tard</em></font></p><p><font color="#000033"><em>// Stocke l'identité courante et revient à l'identité du process<br />private void BackToProcessID()<br />{<br />   wi = WindowsIdentity.GetCurrent();<br />   WindowsIdentity.Impersonate(IntPtr.Zero);<br />}</em></font></p></blockquote></blockquote><p><font color="#000033">Pour revenir à l'identité de l'utilisateur, on appelera cette méthode : </font></p><font color="#000033"><blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><p><br /><em>// Revient à l'identité stockée<br />private void BackToUserID()<br />{<br />   if(wi != null)<br />   wi.Impersonate();<br />}</em></p></blockquote></blockquote><p><br /><strong><font face="Georgia" size="3">Authentification par formulaire (+SSL) et impersonation</font></strong></p><p><br /><font color="#000033">Cette méthode demande aux utilisateurs de s'authentifier par formulaire (cas d'Extranet donc plutôt). On mettra donc en place un cryptage SSL. Les informations fournies sont ensuite vérifiées contre l'AD (avec la fonction LogonUser) puis utilisées pour réaliser une impersonation. Le code continue alors à s'excécuter sous l'identité de l'utilisateur, et il sera possible de requêter des serveurs back-end puisque le jeton du processus peut répondre aux challenges. Voici le code qui réalise l'impersonation (et qui vérifie du même coup l'authenticité des informations saisies par l'utilisateur) : </font></p><blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><p><br /><em><font color="#000033">protected void Button1_Click(object sender, EventArgs e) <br />{<br />   try<br />   {<br />      // On récupère les infos de l'utilisateur : login, domaine et mot de passe<br />      int slashPosition = TextBoxName.Text.IndexOf("\\");<br />      string domain = TextBoxName.Text.Substring(0,slashPosition);<br />      string user = TextBoxName.Text.Substring(slashPosition + 1);<br />      string password = TextBoxPass.Text;</font></em></p><p><em><font color="#000033">      // On construit un WindowsIdentity pour cet utilisateur<br />      WindowsIdentity wi = CreateIdentity(user, domain, password);<br />      this.Page.Session["identity"] = wi; // on stocke l'identité pour utilisation ultérieure (d'autres requêtes)<br />      FormsAuthentication.RedirectFromLoginPage(user, false); // fin du login<br />   }<br />   catch<br />   {<br />      Response.Redirect("logon.aspx", true); // erreur. Par exemple : LogonUser n'a pas pu logger l'utilisateur<br />   }<br />}</font></em></p><p><br /><em><font color="#000033">protected WindowsIdentity CreateIdentity(string userName, string domain, string password)<br />{<br />   IntPtr tokenHandle = new IntPtr(0);<br />   tokenHandle = IntPtr.Zero;</font></em></p><p><em><font color="#000033">   const int LOGON32_PROVIDER_DEFAULT = 0;<br />   const int LOGON32_LOGON_INTERACTIVE = 2;<br />   //const int LOGON32_LOGON_NETWORK = 3;</font></em></p><p><em><font color="#000033">   // Logon the new user<br />   bool returnValue = LogonUser(userName, domain, password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, ref tokenHandle);</font></em></p><p><em><font color="#000033">   if (returnValue == false)<br />   {<br />      int returnError = Marshal.GetLastWin32Error();<br />      throw new Exception("Log on failed: " + returnError);<br />   }</font></em></p><p><em><font color="#000033">   // Return new identity<br />   WindowsIdentity id = new WindowsIdentity(tokenHandle);<br />   CloseHandle(tokenHandle);<br />   return id;<br />}</font></em></p><p><br /><em><font color="#000033">[DllImport("advapi32.dll", SetLastError = true)]<br />private static extern bool LogonUser(String lpszUsername, String lpszDomain, String lpszPassword, int dwLogonType, int dwLogonProvider, ref IntPtr phToken);</font></em></p><p><em><font color="#000033">[DllImport("kernel32.dll", CharSet = CharSet.Auto)]<br />private extern static bool CloseHandle(IntPtr handle);</font></em></p></blockquote></blockquote><p><br /><strong><font face="Georgia" size="3" color="#000033">Tableau récapitulatif</font></strong></p></font><p> </p><p> </p><p /><table cellpadding="8" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; MARGIN: 10px; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" class="iws_table iws_scheme1"><tbody><tr class="dark"><td style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"> </td><th align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="dark" scope="col"><strong>Principe</strong></th><th align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="dark" scope="col"><strong>Contexte</strong></th><th align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="dark" scope="col"><strong>Avantages</strong></th><th align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="dark" scope="col"><strong>Inconvénients</strong></th></tr><tr class="white"><th style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white" scope="row"><strong>Authentification basique + SSL</strong></th><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"> <font color="#000033">Le serveur connaît alors le mot de passe de l'utilisateur et peut ainsi accéder aux ressources distantes.</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><p><font color="#000033">* Intranet et/ou Extranet</font></p><p> </p><p><font color="#000033">* Cross-navigateurs</font></p></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><font color="#336600"> * Simple ! (mais acquisition d'un certificat SSL)</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><p><font color="#ff0000">* Nécessite la mise en place d’un certificat SSL</font></p><p> </p><p><font color="#ff0000">* L’utilisateur doit entrer ses accréditations </font></p></td></tr><tr class="light"><th style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light" scope="row"><strong>Délégation Kerberos</strong></th><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"> <font color="#000033">Mode d'authentification qui permet la délégation vers un serveur back-end</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"><p><font color="#000033">* Intranet</font></p><p> </p><p><font color="#000033">* AD</font></p></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"><font color="#336600"> * Pas de modification du code</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"><p><font color="#ff0000">* Nécessite des tâches d'administration sur le domaine</font></p><p> </p><p><font color="#ff0000">* Complexe à maintenir </font></p></td></tr><tr class="white"><th style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white" scope="row"><strong>Retour au contexte de l'app pool</strong></th><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"> <font color="#000033">Une seule identité se connecte au back-end : celle de l’app pool</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><font color="#000033">* Seule l'identité de l'app pool a accès à la ressource distante </font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><p><font color="#336600"> * Relativement simple</font></p><p> </p><p><font color="#336600">* S’adapte à tout type d’authentification</font></p></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><p><font color="#ff0000"> * Pas de granularité sur les ACL du back-end</font></p><p> </p><p><font color="#ff0000">* Pas d’audit possible</font></p></td></tr><tr class="light"><th style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light" scope="row"><strong>Authentification par formulaire</strong></th><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"> <font color="#000033">On récupère le mot de passe de l’utilisateur pour réaliser l’impersonation depuis le code</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"><p><font color="#000033"> * Extranet</font></p><p> </p><p><font color="#000033">* Cross-navigateurs</font></p><p> </p><p><font color="#000033">* Système tiers d’authentification des utilisateurs (peut être l’AD)</font> </p></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"> </td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"> </td></tr><tr class="white"><th style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white" scope="row"><strong>COM+</strong></th><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"> <font color="#000033">Une seule identité se connecte au back-end : celle de l’application COM+</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><font color="#000033"> * Seule l'identité de l'application COM+ a accès à la ressource distante</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><p><font color="#336600">* Relativement simple</font></p><p> </p><p><font color="#336600">* S’adapte à tout type d’authentification </font></p></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><p><font color="#ff0000">* Pas de granularité sur les ACL du back-end</font></p><p> </p><p><font color="#ff0000">* Pas d’audit possible </font></p></td></tr><tr class="light"><th style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light" scope="row"><strong>Transition de protocole</strong></th><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"> <font color="#000033">On impersonifie l’utilisateur sans son mot de passe</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"><p><font color="#000033"> * AD Win2003</font></p><p> </p><p><font color="#000033">* Système tiers d’authentification des utilisateurs (peut être l’AD)</font></p></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"> </td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="light"><font color="#ff0000">* Complexe à mettre en place </font></td></tr><tr class="white"><th style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; FONT-WEIGHT: normal; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white" scope="row"><strong>Impersonation dans le web.config + cryptage</strong></th><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><font color="#000033">Une seule identité se connecte au back-end : celle définie dans le web.config </font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><font color="#000033">*  Seule l'identité spécifiée a accès à la ressource distante</font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"><font color="#336600">* Facile à maintenir </font></td><td align="center" style="BORDER-BOTTOM: #777777 1px solid; BORDER-LEFT: #777777 1px solid; BORDER-TOP: #777777 1px solid; BORDER-RIGHT: #777777 1px solid" colspan="1" rowspan="1" class="white"> </td></tr></tbody></table><p /><p> </p>
                                                    </div>
                                                </td>
                                                <td style="WIDTH: 1%" colspan="1" rowspan="1" class="MS_WH_ZoneSpacing" />
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <tr>
            <td id="IWS_WH_Elem_Footer" colspan="2" class="MS_MasterFooter">
                <div class="MSC_FooterFrame">
                    <span id="IWS_WH_Elem_FooterLinks">

                    </span>
                    <div id="IWS_WH_Elem_FooterText" class="MSC_FooterText">
                        <span style="font-weight: normal; font-size: 10pt; color: #ffffff; font-style: normal; font-family: Arial; text-decoration:none ">BakTek - Expertise en développement SharePoint - contact@baktek.fr</span>
                    </div>
                </div>
            </td>
        </tr>

    </table>
</body>

</html>
